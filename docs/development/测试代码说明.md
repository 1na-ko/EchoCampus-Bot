# EchoCampus-Bot æµ‹è¯•ä»£ç è¯´æ˜

> **æœ€åæ›´æ–°**: 2026å¹´1æœˆ14æ—¥  
> **é€‚ç”¨ç‰ˆæœ¬**: EchoCampus-Bot 1.0.0

---

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–åç«¯ Java æœåŠ¡å’Œå‰ç«¯ Vue 3 åº”ç”¨ã€‚æµ‹è¯•æŒ‰ç…§ä¼˜å…ˆçº§ï¼ˆP0-P3ï¼‰ç»„ç»‡ï¼Œç¡®ä¿æ ¸å¿ƒåŠŸèƒ½çš„å¯é æ€§ã€‚

## ğŸ—ï¸ æµ‹è¯•æ¶æ„

### åç«¯æµ‹è¯• (Java/Spring Boot)

```
backend/src/test/java/com/echocampus/bot/
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ JwtUtilTest.java          # P0 - JWTå·¥å…·ç±»æµ‹è¯• (25+ ç”¨ä¾‹)
â”œâ”€â”€ service/impl/
â”‚   â”œâ”€â”€ UserServiceImplTest.java      # P0 - ç”¨æˆ·æœåŠ¡æµ‹è¯• (20+ ç”¨ä¾‹)
â”‚   â”œâ”€â”€ ChatServiceImplTest.java      # P1 - èŠå¤©æœåŠ¡æµ‹è¯• (18+ ç”¨ä¾‹)
â”‚   â””â”€â”€ KnowledgeServiceImplTest.java # P1 - çŸ¥è¯†åº“æœåŠ¡æµ‹è¯• (20+ ç”¨ä¾‹)
â””â”€â”€ controller/
    â”œâ”€â”€ UserControllerTest.java       # P2 - ç”¨æˆ·æ§åˆ¶å™¨æµ‹è¯• (15+ ç”¨ä¾‹)
    â”œâ”€â”€ ChatControllerTest.java       # P2 - èŠå¤©æ§åˆ¶å™¨æµ‹è¯• (15+ ç”¨ä¾‹)
    â””â”€â”€ KnowledgeControllerTest.java  # P2 - çŸ¥è¯†åº“æ§åˆ¶å™¨æµ‹è¯• (18+ ç”¨ä¾‹)
```

### å‰ç«¯æµ‹è¯• (Vue 3/TypeScript)

```
frontend/src/__tests__/stores/
â”œâ”€â”€ user.test.ts      # P3 - ç”¨æˆ·çŠ¶æ€ç®¡ç†æµ‹è¯• (20+ ç”¨ä¾‹)
â”œâ”€â”€ chat.test.ts      # P3 - èŠå¤©çŠ¶æ€ç®¡ç†æµ‹è¯• (18+ ç”¨ä¾‹)
â””â”€â”€ knowledge.test.ts # P3 - çŸ¥è¯†åº“çŠ¶æ€ç®¡ç†æµ‹è¯• (18+ ç”¨ä¾‹)
```

## ğŸ¯ æµ‹è¯•ä¼˜å…ˆçº§è¯´æ˜

| ä¼˜å…ˆçº§ | è¯´æ˜ | è¦†ç›–èŒƒå›´ |
|--------|------|----------|
| **P0** | æ ¸å¿ƒå®‰å…¨ç»„ä»¶ | JWTå·¥å…·ç±»ã€ç”¨æˆ·è®¤è¯æœåŠ¡ |
| **P1** | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ | èŠå¤©æœåŠ¡ã€çŸ¥è¯†åº“æœåŠ¡ |
| **P2** | API æ¥å£å±‚ | æ‰€æœ‰ Controller ç«¯ç‚¹ |
| **P3** | å‰ç«¯çŠ¶æ€ç®¡ç† | Pinia Store |

## ğŸš€ è¿è¡Œæµ‹è¯•

### åç«¯æµ‹è¯•

#### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
cd backend
mvn test
```

#### è¿è¡Œå•ä¸ªæµ‹è¯•ç±»
```bash
# è¿è¡Œ JwtUtil æµ‹è¯•
mvn test -Dtest=JwtUtilTest

# è¿è¡Œ UserService æµ‹è¯•
mvn test -Dtest=UserServiceImplTest

# è¿è¡Œ ChatService æµ‹è¯•
mvn test -Dtest=ChatServiceImplTest

# è¿è¡Œ KnowledgeService æµ‹è¯•
mvn test -Dtest=KnowledgeServiceImplTest
```

#### è¿è¡ŒæŒ‡å®šåŒ…ä¸‹çš„æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰ Service æµ‹è¯•
mvn test -Dtest="com.echocampus.bot.service.impl.*Test"

# è¿è¡Œæ‰€æœ‰ Controller æµ‹è¯•
mvn test -Dtest="com.echocampus.bot.controller.*Test"
```

#### ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
```bash
mvn clean test jacoco:report
```
æŠ¥å‘Šä½ç½®: `backend/target/site/jacoco/index.html`

### å‰ç«¯æµ‹è¯•

#### å®‰è£…ä¾èµ–
```bash
cd frontend
pnpm install
```

#### è¿è¡Œæµ‹è¯•ï¼ˆç›‘å¬æ¨¡å¼ï¼‰
```bash
pnpm test
```

#### è¿è¡Œæµ‹è¯•ï¼ˆå•æ¬¡è¿è¡Œï¼‰
```bash
pnpm test:run
```

#### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
pnpm test:coverage
```
æŠ¥å‘Šä½ç½®: `frontend/coverage/index.html`

## ğŸ“¦ æµ‹è¯•ä¾èµ–

### åç«¯ä¾èµ– (pom.xml)

```xml
<!-- JUnit 5 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-test</artifactId>
    <scope>test</scope>
</dependency>

<!-- Mockito -->
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-junit-jupiter</artifactId>
    <scope>test</scope>
</dependency>

<!-- AssertJ -->
<dependency>
    <groupId>org.assertj</groupId>
    <artifactId>assertj-core</artifactId>
    <scope>test</scope>
</dependency>
```

### å‰ç«¯ä¾èµ– (package.json)

```json
{
  "devDependencies": {
    "vitest": "^1.2.2",
    "@vue/test-utils": "^2.4.4",
    "jsdom": "^24.0.0",
    "@vitest/coverage-v8": "^1.2.2"
  }
}
```

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### P0 - JwtUtilTest (JWT å·¥å…·ç±»)

| æµ‹è¯•åˆ†ç±» | æµ‹è¯•å†…å®¹ |
|----------|----------|
| Token ç”Ÿæˆ | æ­£å¸¸ç”Ÿæˆã€ç©ºç”¨æˆ·IDã€nullç”¨æˆ·ID |
| Token è§£æ | æ­£å¸¸è§£æã€è·å–ç”¨æˆ·IDã€è§£ææ— æ•ˆToken |
| Token éªŒè¯ | æœ‰æ•ˆTokenã€è¿‡æœŸTokenã€ç¯¡æ”¹Tokenã€ç©ºToken |
| è¾¹ç•Œæ¡ä»¶ | ç‰¹æ®Šå­—ç¬¦ç”¨æˆ·IDã€è¶…é•¿ç”¨æˆ·IDã€å³å°†è¿‡æœŸToken |

### P0 - UserServiceImplTest (ç”¨æˆ·æœåŠ¡)

| æµ‹è¯•åˆ†ç±» | æµ‹è¯•å†…å®¹ |
|----------|----------|
| ç™»å½•åŠŸèƒ½ | æ­£å¸¸ç™»å½•ã€ç”¨æˆ·ä¸å­˜åœ¨ã€å¯†ç é”™è¯¯ã€ç©ºå‚æ•° |
| æ³¨å†ŒåŠŸèƒ½ | æ­£å¸¸æ³¨å†Œã€ç”¨æˆ·åå·²å­˜åœ¨ã€ç©ºå‚æ•°ã€ç‰¹æ®Šå­—ç¬¦ |
| éªŒè¯ç æ³¨å†Œ | æ­£å¸¸æ³¨å†Œã€éªŒè¯ç é”™è¯¯ã€éªŒè¯ç è¿‡æœŸ |
| ç”¨æˆ·æŸ¥è¯¢ | æ­£å¸¸æŸ¥è¯¢ã€ç”¨æˆ·ä¸å­˜åœ¨ã€nullå‚æ•° |
| å¯†ç ä¿®æ”¹ | æ­£å¸¸ä¿®æ”¹ã€æ—§å¯†ç é”™è¯¯ã€æ–°æ—§å¯†ç ç›¸åŒ |

### P1 - ChatServiceImplTest (èŠå¤©æœåŠ¡)

| æµ‹è¯•åˆ†ç±» | æµ‹è¯•å†…å®¹ |
|----------|----------|
| å‘é€æ¶ˆæ¯ | æ­£å¸¸å‘é€ã€ç©ºæ¶ˆæ¯ã€è¶…é•¿æ¶ˆæ¯ã€æ–°ä¼šè¯ |
| ä¼šè¯ç®¡ç† | è·å–ä¼šè¯åˆ—è¡¨ã€åˆ›å»ºä¼šè¯ã€åˆ é™¤ä¼šè¯ |
| æ¶ˆæ¯æŸ¥è¯¢ | è·å–å†å²æ¶ˆæ¯ã€åˆ†é¡µæŸ¥è¯¢ã€ç©ºä¼šè¯ |

### P1 - KnowledgeServiceImplTest (çŸ¥è¯†åº“æœåŠ¡)

| æµ‹è¯•åˆ†ç±» | æµ‹è¯•å†…å®¹ |
|----------|----------|
| æ–‡æ¡£ä¸Šä¼  | æ­£å¸¸ä¸Šä¼ ã€ç©ºæ–‡ä»¶ã€è¶…å¤§æ–‡ä»¶ã€ä¸æ”¯æŒæ ¼å¼ |
| æ–‡æ¡£æŸ¥è¯¢ | è·å–åˆ—è¡¨ã€åˆ†é¡µæŸ¥è¯¢ã€æŒ‰åˆ†ç±»æŸ¥è¯¢ |
| æ–‡æ¡£æ›´æ–° | æ­£å¸¸æ›´æ–°ã€æ–‡æ¡£ä¸å­˜åœ¨ã€æƒé™æ ¡éªŒ |
| æ–‡æ¡£åˆ é™¤ | æ­£å¸¸åˆ é™¤ã€æ–‡æ¡£ä¸å­˜åœ¨ã€çº§è”åˆ é™¤ |
| é‡å»ºç´¢å¼• | æ­£å¸¸é‡å»ºã€æ–‡æ¡£ä¸å­˜åœ¨ |

### P2 - Controller æµ‹è¯•

æ‰€æœ‰ Controller æµ‹è¯•ä½¿ç”¨ `MockMvc` è¿›è¡Œ HTTP è¯·æ±‚æ¨¡æ‹Ÿï¼ŒéªŒè¯ï¼š
- HTTP çŠ¶æ€ç 
- è¯·æ±‚å‚æ•°æ ¡éªŒ
- å“åº”æ•°æ®ç»“æ„
- é”™è¯¯å¤„ç†æœºåˆ¶
- è®¤è¯æˆæƒæ£€æŸ¥

### P3 - å‰ç«¯ Store æµ‹è¯•

ä½¿ç”¨ Vitest + @vue/test-utils æµ‹è¯• Pinia Storeï¼š
- Action æ‰§è¡Œé€»è¾‘
- Getter è®¡ç®—å±æ€§
- State çŠ¶æ€å˜æ›´
- API è°ƒç”¨æ¨¡æ‹Ÿ
- é”™è¯¯å¤„ç†

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

| æ¨¡å— | è¡Œè¦†ç›–ç‡ç›®æ ‡ | åˆ†æ”¯è¦†ç›–ç‡ç›®æ ‡ |
|------|--------------|----------------|
| Utils (P0) | â‰¥ 90% | â‰¥ 85% |
| Service (P0/P1) | â‰¥ 80% | â‰¥ 75% |
| Controller (P2) | â‰¥ 70% | â‰¥ 65% |
| Store (P3) | â‰¥ 70% | â‰¥ 65% |

## ğŸ”§ æµ‹è¯•é…ç½®æ–‡ä»¶

### åç«¯ - application-test.properties

æµ‹è¯•ç¯å¢ƒä½¿ç”¨ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œä½äº `src/test/resources/application-test.properties`

### å‰ç«¯ - vitest.config.ts

```typescript
import { defineConfig } from 'vitest/config'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  test: {
    environment: 'jsdom',
    globals: true,
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      include: ['src/**/*.{ts,vue}'],
      exclude: ['src/**/*.d.ts', 'src/main.ts']
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src')
    }
  }
})
```

## ğŸ“ ç¼–å†™æ–°æµ‹è¯•æŒ‡å—

### åç«¯æµ‹è¯•æ¨¡æ¿

```java
@ExtendWith(MockitoExtension.class)
@DisplayName("XXX æµ‹è¯•")
class XxxTest {

    @Mock
    private DependencyService dependencyService;

    @InjectMocks
    private TargetService targetService;

    @Nested
    @DisplayName("åŠŸèƒ½Aæµ‹è¯•")
    class FeatureATests {
        
        @Test
        @DisplayName("æ­£å¸¸åœºæ™¯ - åº”è¯¥è¿”å›é¢„æœŸç»“æœ")
        void shouldReturnExpectedResult_WhenNormalCase() {
            // Arrange
            given(dependencyService.method()).willReturn(expected);
            
            // Act
            var result = targetService.method();
            
            // Assert
            assertThat(result).isEqualTo(expected);
        }
    }
}
```

### å‰ç«¯æµ‹è¯•æ¨¡æ¿

```typescript
import { describe, it, expect, beforeEach, vi } from 'vitest'
import { setActivePinia, createPinia } from 'pinia'
import { useXxxStore } from '@/stores/xxx'

vi.mock('@/api', () => ({
  xxxApi: {
    method: vi.fn()
  }
}))

describe('Xxx Store', () => {
  let store: ReturnType<typeof useXxxStore>

  beforeEach(() => {
    setActivePinia(createPinia())
    store = useXxxStore()
    vi.clearAllMocks()
  })

  describe('action: methodName', () => {
    it('æ­£å¸¸åœºæ™¯ - åº”è¯¥æ›´æ–°çŠ¶æ€', async () => {
      // Arrange
      const mockData = { /* ... */ }
      vi.mocked(xxxApi.method).mockResolvedValue({ data: mockData })

      // Act
      await store.methodName()

      // Assert
      expect(store.state).toEqual(mockData)
    })
  })
})
```

## â“ å¸¸è§é—®é¢˜

### Q: æµ‹è¯•è¿è¡Œæ—¶æŠ¥æ‰¾ä¸åˆ°ç±»é”™è¯¯ï¼Ÿ
A: ç¡®ä¿å…ˆç¼–è¯‘é¡¹ç›®ï¼š`mvn compile test-compile`

### Q: å‰ç«¯æµ‹è¯•æŠ¥æ¨¡å—æ‰¾ä¸åˆ°ï¼Ÿ
A: ç¡®ä¿å®‰è£…äº†æ‰€æœ‰ä¾èµ–ï¼š`pnpm install`

### Q: å¦‚ä½•åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•ï¼Ÿ
A: åç«¯ä½¿ç”¨ `mvn test -Dsurefire.rerunFailingTestsCount=2`

### Q: å¦‚ä½•è·³è¿‡æµ‹è¯•ï¼Ÿ
A: åç«¯ä½¿ç”¨ `mvn package -DskipTests`

## ğŸ“š å‚è€ƒèµ„æ–™

- [JUnit 5 ç”¨æˆ·æŒ‡å—](https://junit.org/junit5/docs/current/user-guide/)
- [Mockito æ–‡æ¡£](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html)
- [Vitest æ–‡æ¡£](https://vitest.dev/)
- [Vue Test Utils æ–‡æ¡£](https://test-utils.vuejs.org/)
